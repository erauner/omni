# Containerd registry mirrors for Nexus Docker proxies
# Routes image pulls through Nexus cache with upstream fallback for bootstrap
# See: https://github.com/erauner12/omni/issues/2
machine:
  registries:
    mirrors:
      # Docker Hub
      docker.io:
        endpoints:
          - https://docker-hub.nexus.erauner.dev  # Nexus cache
          - https://registry-1.docker.io          # Upstream fallback

      # GitHub Container Registry
      ghcr.io:
        endpoints:
          - https://docker-ghcr.nexus.erauner.dev
          - https://ghcr.io

      # Quay.io
      quay.io:
        endpoints:
          - https://docker-quay.nexus.erauner.dev
          - https://quay.io

      # LinuxServer.io
      lscr.io:
        endpoints:
          - https://docker-lscr.nexus.erauner.dev
          - https://lscr.io

      # Kubernetes registry
      registry.k8s.io:
        endpoints:
          - https://docker-k8s.nexus.erauner.dev
          - https://registry.k8s.io

      # AWS ECR Public
      public.ecr.aws:
        endpoints:
          - https://docker-ecr.nexus.erauner.dev
          - https://public.ecr.aws
